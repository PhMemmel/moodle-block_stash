{"version":3,"file":"drop-snippet-dialogue.min.js","sources":["../src/drop-snippet-dialogue.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Drop snippet dialogue module.\n *\n * @copyright  2016 Frédéric Massart - FMCorz.net\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'core/templates',\n    'block_stash/dialogue-base'\n], function(Templates, DialogueBase) {\n\n    /**\n     * Snippet dialogue class.\n     *\n     * @param {Drop} drop The drop.\n     * @param {Array} warnings List of warnings.\n     * @param {String} altSnippetMaker The name of the alternat snippet maker module.\n     */\n    function Dialog(drop, warnings, altSnippetMaker) {\n        this._drop = drop;\n        this._warnings = warnings;\n        this._altSnippetMaker = altSnippetMaker;\n        this.setTitle(drop.get('name'));\n        DialogueBase.prototype.constructor.apply(this, []);\n    }\n    Dialog.prototype = Object.create(DialogueBase.prototype);\n    Dialog.prototype.constructor = Dialog;\n\n    Dialog.prototype._drop = null;\n    Dialog.prototype._altSnippetMaker = null;\n    Dialog.prototype._warnings = null;\n\n    /**\n     * Render the dialogue.\n     *\n     * @method _render\n     * @return {Promise}\n     */\n    Dialog.prototype._render = function() {\n        var context = {\n            drop: this._drop.getData(),\n            dropjson: JSON.stringify(this._drop.getData()),\n            item: this._drop.getItem().getData(),\n            itemjson: JSON.stringify(this._drop.getItem().getData()),\n            altsnippetmaker: this._altSnippetMaker,\n            warnings: this._warnings,\n            haswarnings: this._warnings && this._warnings.length,\n        };\n        return Templates.render('block_stash/drop_snippet_dialogue', context)\n        .then(function(html, js) {\n            this._setDialogueContent(html);\n            this.center();\n            Templates.runTemplateJS(js);\n        }.bind(this));\n    };\n\n    return /** @alias module:block_stash/drop-snippet-dialogue */ Dialog;\n\n});\n"],"names":["define","Templates","DialogueBase","Dialog","drop","warnings","altSnippetMaker","_drop","_warnings","_altSnippetMaker","setTitle","get","prototype","constructor","apply","this","Object","create","_render","context","getData","dropjson","JSON","stringify","item","getItem","itemjson","altsnippetmaker","haswarnings","length","render","then","html","js","_setDialogueContent","center","runTemplateJS","bind"],"mappings":";;;;;;AAsBAA,2CAAO,CACH,iBACA,8BACD,SAASC,UAAWC,uBASVC,OAAOC,KAAMC,SAAUC,sBACvBC,MAAQH,UACRI,UAAYH,cACZI,iBAAmBH,qBACnBI,SAASN,KAAKO,IAAI,SACvBT,aAAaU,UAAUC,YAAYC,MAAMC,KAAM,WAEnDZ,OAAOS,UAAYI,OAAOC,OAAOf,aAAaU,WAC9CT,OAAOS,UAAUC,YAAcV,OAE/BA,OAAOS,UAAUL,MAAQ,KACzBJ,OAAOS,UAAUH,iBAAmB,KACpCN,OAAOS,UAAUJ,UAAY,KAQ7BL,OAAOS,UAAUM,QAAU,eACnBC,QAAU,CACVf,KAAMW,KAAKR,MAAMa,UACjBC,SAAUC,KAAKC,UAAUR,KAAKR,MAAMa,WACpCI,KAAMT,KAAKR,MAAMkB,UAAUL,UAC3BM,SAAUJ,KAAKC,UAAUR,KAAKR,MAAMkB,UAAUL,WAC9CO,gBAAiBZ,KAAKN,iBACtBJ,SAAUU,KAAKP,UACfoB,YAAab,KAAKP,WAAaO,KAAKP,UAAUqB,eAE3C5B,UAAU6B,OAAO,oCAAqCX,SAC5DY,KAAK,SAASC,KAAMC,SACZC,oBAAoBF,WACpBG,SACLlC,UAAUmC,cAAcH,KAC1BI,KAAKtB,QAGmDZ"}