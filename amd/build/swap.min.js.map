{"version":3,"sources":["../src/swap.js"],"names":["define","$","Ajax","SwapForm","get_user_stash","courseid","userid","call","methodname","args","then","allitems","myuserid","userstash","mystash","when","yours","mine","swapform","show","catch","error","window","console","log"],"mappings":"AAuBAA,OAAM,oBAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,2BAAxB,CAAD,CAAuD,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAA4B,CAcrF,QAASC,CAAAA,CAAT,CAAwBC,CAAxB,CAAkCC,CAAlC,CAA0C,CACtC,MAAOJ,CAAAA,CAAI,CAACK,IAAL,CAAU,CAAC,CACdC,UAAU,CAAE,kCADE,CAEdC,IAAI,CAAE,CACFJ,QAAQ,CAAEA,CADR,CAEFC,MAAM,CAAEA,CAFN,CAFQ,CAAD,CAAV,EAMH,CANG,EAMAI,IANA,CAMK,SAASC,CAAT,CAAmB,CAC3B,MAAOA,CAAAA,CACV,CARM,CASV,CAED,MAxBA,UAAcN,CAAd,CAAwBC,CAAxB,CAAgCM,CAAhC,CAA0C,CACtC,GAAIC,CAAAA,CAAJ,CAAeC,CAAf,CACAD,CAAS,CAAGT,CAAc,CAACC,CAAD,CAAWC,CAAX,CAA1B,CACAQ,CAAO,CAAGV,CAAc,CAACC,CAAD,CAAWO,CAAX,CAAxB,CACAX,CAAC,CAACc,IAAF,CAAOF,CAAP,CAAkBC,CAAlB,EAA2BJ,IAA3B,CAAgC,SAASM,CAAT,CAAgBC,CAAhB,CAAsB,CAClD,GAAIC,CAAAA,CAAQ,CAAG,GAAIf,CAAAA,CAAJ,CAAaE,CAAb,CAAuBW,CAAvB,CAA8BC,CAA9B,CAAf,CACAC,CAAQ,CAACC,IAAT,EACH,CAHD,EAGGC,KAHH,CAGS,SAASC,CAAT,CAAgB,CACrBC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,yBAA2BH,CAA9C,CACH,CALD,CAMH,CAgBJ,CA5BK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * User swap code\n *\n * @package    block_stash\n * @copyright  2019 Adrian Greeve - adriangreeve.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"jquery\", \"core/ajax\", \"block_stash/swap-dialogue\"], function($, Ajax, SwapForm) {\n\n    function init(courseid, userid, myuserid) {\n        var userstash, mystash;\n        userstash = get_user_stash(courseid, userid);\n        mystash = get_user_stash(courseid, myuserid);\n        $.when(userstash, mystash).then(function(yours, mine) {\n            var swapform = new SwapForm(courseid, yours, mine);\n            swapform.show();\n        }).catch(function(error) {\n            window.console.log('Could not do the trade' + error);\n        });\n    }\n\n    function get_user_stash(courseid, userid) {\n        return Ajax.call([{\n            methodname: 'block_stash_get_user_stash_items',\n            args: {\n                courseid: courseid,\n                userid: userid\n            }\n        }])[0].then(function(allitems) {\n            return allitems;\n        });\n    }\n\n    return init;\n\n});"],"file":"swap.min.js"}