/**
 * Drop snippet dialogue module.
 *
 * @copyright  2016 Frédéric Massart - FMCorz.net
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_stash/trade-snippet-dialogue",["core/templates","block_stash/dialogue-base","core/ajax"],(function(Templates,DialogueBase,ajax){function Dialog(trade,warnings,altSnippetMaker){window.console.log("other"),this._trade=trade,this._warnings=warnings,this._altSnippetMaker=altSnippetMaker,this.setTitle(trade.get("name")),DialogueBase.prototype.constructor.apply(this,[])}return Dialog.prototype=Object.create(DialogueBase.prototype),Dialog.prototype.constructor=Dialog,Dialog.prototype._trade=null,Dialog.prototype._warnings=null,Dialog.prototype._render=function(){var context={trade:this._trade.getData(),tradejson:JSON.stringify(this._trade.getData()),warnings:this._warnings,haswarnings:this._warnings&&this._warnings.length,altsnippetmaker:this._altSnippetMaker};return ajax.call([{methodname:"block_stash_get_trade_items",args:{tradeid:this._trade.get("id")}}])[0].then(function(stuff){context.tradeitems=stuff,Templates.render("block_stash/trade_snippet_dialogue",context).then(function(html,js){this._setDialogueContent(html),this.center(),Templates.runTemplateJS(js)}.bind(this))}.bind(this))},Dialog}));

//# sourceMappingURL=trade-snippet-dialogue.min.js.map