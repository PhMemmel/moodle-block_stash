{"version":3,"sources":["../src/add-item.js"],"names":["addItem","e","preventDefault","addbtn","currentTarget","selectedtype","getAttribute","selectedobject","document","getElementById","optionelement","options","selectedIndex","context","id","itemid","name","innerText","imageurl","useritemid","value","quantity","selecttype","tableelement","querySelector","Templates","render","then","html","js","replaceNodeContents","setAttribute","appendNodeContents","init","addbtns","querySelectorAll","forEach","addbutton","addEventListener"],"mappings":"sJAuBA,uD,GAEMA,CAAAA,CAAO,CAAG,SAACC,CAAD,CAAO,CACnBA,CAAC,CAACC,cAAF,GADmB,GAGfC,CAAAA,CAAM,CAAGF,CAAC,CAACG,aAHI,CAKfC,CAAY,CAAGF,CAAM,CAACG,YAAP,CAAoB,eAApB,CALA,CAMfC,CAAc,CAAGC,QAAQ,CAACC,cAAT,CAAwBJ,CAAxB,CANF,CAOfK,CAAa,CAAGH,CAAc,CAACI,OAAf,CAAuBJ,CAAc,CAACK,aAAtC,CAPD,CAQfC,CAAO,CAAG,CACVC,EAAE,CAAEJ,CAAa,CAACJ,YAAd,CAA2B,aAA3B,CADM,CAEVS,MAAM,CAAEL,CAAa,CAACJ,YAAd,CAA2B,aAA3B,CAFE,CAGVU,IAAI,CAAEN,CAAa,CAACO,SAHV,CAIVC,QAAQ,CAAER,CAAa,CAACJ,YAAd,CAA2B,aAA3B,CAJA,CAKVa,UAAU,CAAET,CAAa,CAACU,KALhB,CAMVC,QAAQ,CAAEX,CAAa,CAACJ,YAAd,CAA2B,aAA3B,CANA,CAOVgB,UAAU,CAAEjB,CAPF,CARK,CAkBfkB,CAAY,CAAGf,QAAQ,CAACgB,aAAT,CAAuB,qBAAsBnB,CAAtB,CAAqC,KAA5D,CAlBA,CAmBnBoB,UAAUC,MAAV,CAAiB,6BAAjB,CAAgDb,CAAhD,EAAyDc,IAAzD,CAA8D,SAACC,CAAD,CAAOC,CAAP,CAAc,CACxE,GAAgD,OAA5C,EAAAN,CAAY,CAACjB,YAAb,CAA0B,aAA1B,CAAJ,CAAyD,CACrDmB,UAAUK,mBAAV,CAA8BP,CAA9B,CAA4CK,CAA5C,CAAkDC,CAAlD,EACAN,CAAY,CAACQ,YAAb,CAA0B,aAA1B,CAAyC,OAAzC,CACH,CAHD,IAGO,CACHN,UAAUO,kBAAV,CAA6BT,CAA7B,CAA2CK,CAA3C,CAAiDC,CAAjD,CACH,CACJ,CAPD,CAQH,C,QAEmB,QAAPI,CAAAA,IAAO,EAAM,CACtB,GAAIC,CAAAA,CAAO,CAAG1B,QAAQ,CAAC2B,gBAAT,CAA0B,iBAA1B,CAAd,CACAD,CAAO,CAACE,OAAR,CAAgB,SAACC,CAAD,CAAe,CAC3BA,CAAS,CAACC,gBAAV,CAA2B,OAA3B,CAAoCtC,CAApC,CACH,CAFD,CAGH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add items to a table.\n *\n * @package    block_stash\n * @copyright  2019 Adrian Greeve <adriangreeve.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from 'core/templates';\n\nconst addItem = (e) => {\n    e.preventDefault();\n\n    let addbtn = e.currentTarget;\n\n    let selectedtype = addbtn.getAttribute('data-add-item');\n    let selectedobject = document.getElementById(selectedtype);\n    let optionelement = selectedobject.options[selectedobject.selectedIndex];\n    let context = {\n        id: optionelement.getAttribute('data-itemid'),\n        itemid: optionelement.getAttribute('data-itemid'),\n        name: optionelement.innerText,\n        imageurl: optionelement.getAttribute('data-imgurl'),\n        useritemid: optionelement.value,\n        quantity: optionelement.getAttribute('data-amount'),\n        selecttype: selectedtype\n    };\n\n    let tableelement = document.querySelector('table[data-type=\"' + selectedtype + '\"]');\n    Templates.render('block_stash/add_item_detail', context).then((html, js) => {\n        if (tableelement.getAttribute('data-status') == 'empty') {\n            Templates.replaceNodeContents(tableelement, html, js);\n            tableelement.setAttribute('data-status', 'thing');\n        } else {\n            Templates.appendNodeContents(tableelement, html, js);\n        }\n    });\n};\n\nexport const init = () => {\n    let addbtns = document.querySelectorAll('[data-add-item]');\n    addbtns.forEach((addbutton) => {\n        addbutton.addEventListener('click', addItem);\n    });\n};\n"],"file":"add-item.min.js"}