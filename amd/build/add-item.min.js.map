{"version":3,"sources":["../src/add-item.js"],"names":["define","Templates","Ajax","AddItem","useritemid","itemid","name","quantity","imageurl","tablenode","selecttype","render","id","then","html","js","tablecontentstatus","attr","replaceNodeContents","appendNodeContents","bind","RemoveItem","window","console","log","requestSwap","userid","myuserid","courseid","items","myitems","call","methodname","args","allitems","add","remove","submitSwap"],"mappings":"AAuBAA,OAAM,wBAAC,CACH,gBADG,CAEH,WAFG,CAAD,CAGH,SAASC,CAAT,CAAoBC,CAApB,CAA0B,CAEzB,QAASC,CAAAA,CAAT,CAAiBC,CAAjB,CAA6BC,CAA7B,CAAqCC,CAArC,CAA2CC,CAA3C,CAAqDC,CAArD,CAA+DC,CAA/D,CAA0EC,CAA1E,CAAsF,CAYlFT,CAAS,CAACU,MAAV,CAAiB,6BAAjB,CAVc,CACVC,EAAE,CAAEP,CADM,CAEVA,MAAM,CAAEA,CAFE,CAGVC,IAAI,CAAEA,CAHI,CAIVE,QAAQ,CAAEA,CAJA,CAKVJ,UAAU,CAAEA,CALF,CAMVG,QAAQ,CAAEA,CANA,CAOVG,UAAU,CAAEA,CAPF,CAUd,EAAyDG,IAAzD,CAA8D,SAASC,CAAT,CAAeC,CAAf,CAAmB,CAC7E,GAAIC,CAAAA,CAAkB,CAAGP,CAAS,CAACQ,IAAV,CAAe,aAAf,CAAzB,CACA,GAA0B,OAAtB,EAAAD,CAAJ,CAAmC,CAC/Bf,CAAS,CAACiB,mBAAV,CAA8BT,CAA9B,CAAyCK,CAAzC,CAA+CC,CAA/C,EACAN,CAAS,CAACQ,IAAV,CAAe,aAAf,CAA8B,OAA9B,CACH,CAHD,IAGO,CACHhB,CAAS,CAACkB,kBAAV,CAA6BV,CAA7B,CAAwCK,CAAxC,CAA8CC,CAA9C,CACH,CACJ,CAR6D,CAQ5DK,IAR4D,CAQvD,IARuD,CAA9D,CAUH,CAED,QAASC,CAAAA,CAAT,EAAsB,CAClBC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,2BAAnB,CACH,CAED,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAA6BC,CAA7B,CAAuCC,CAAvC,CAAiDC,CAAjD,CAAwDC,CAAxD,CAAiE,CAC7D,MAAO5B,CAAAA,CAAI,CAAC6B,IAAL,CAAU,CAAC,CACdC,UAAU,CAAE,iCADE,CAEdC,IAAI,CAAE,CACFP,MAAM,CAAEA,CADN,CAEFC,QAAQ,CAAEA,CAFR,CAGFC,QAAQ,CAAEA,CAHR,CAIFC,KAAK,CAAEA,CAJL,CAKFC,OAAO,CAAEA,CALP,CAFQ,CAAD,CAAV,EASH,CATG,EASAjB,IATA,CASK,SAASqB,CAAT,CAAmB,CAC3B,MAAOA,CAAAA,CACV,CAXM,CAYV,CAED,MAAO,CACHC,GAAG,CAAE,aAAS/B,CAAT,CAAqBC,CAArB,CAA6BC,CAA7B,CAAmCC,CAAnC,CAA6CC,CAA7C,CAAuDC,CAAvD,CAAkEC,CAAlE,CAA8E,CAC/EP,CAAO,CAACC,CAAD,CAAaC,CAAb,CAAqBC,CAArB,CAA2BC,CAA3B,CAAqCC,CAArC,CAA+CC,CAA/C,CAA0DC,CAA1D,CACV,CAHE,CAIH0B,MAAM,CAAE,iBAAW,CACff,CAAU,EACb,CANE,CAOHgB,UAAU,CAAE,oBAASX,CAAT,CAAiBC,CAAjB,CAA2BC,CAA3B,CAAqCC,CAArC,CAA4CC,CAA5C,CAAqD,CAC7DL,CAAW,CAACC,CAAD,CAASC,CAAT,CAAmBC,CAAnB,CAA6BC,CAA7B,CAAoCC,CAApC,CACd,CATE,CAYV,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add items to a table.\n *\n * @package    block_stash\n * @copyright  2019 Adrian Greeve <adriangreeve.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'core/templates',\n    'core/ajax'\n], function(Templates, Ajax) {\n\n    function AddItem(useritemid, itemid, name, quantity, imageurl, tablenode, selecttype) {\n\n        var context = {\n            id: itemid,\n            itemid: itemid,\n            name: name,\n            imageurl: imageurl,\n            useritemid: useritemid,\n            quantity: quantity,\n            selecttype: selecttype\n        };\n\n        Templates.render('block_stash/add_item_detail', context).then(function(html, js) {\n            var tablecontentstatus = tablenode.attr('data-status');\n            if (tablecontentstatus == 'empty') {\n                Templates.replaceNodeContents(tablenode, html, js);\n                tablenode.attr('data-status', 'thing');\n            } else {\n                Templates.appendNodeContents(tablenode, html, js);\n            }\n        }.bind(this));\n\n    }\n\n    function RemoveItem() {\n        window.console.log('lets get this out of here');\n    }\n\n    function requestSwap(userid, myuserid, courseid, items, myitems) {\n        return Ajax.call([{\n            methodname: 'block_stash_create_swap_request',\n            args: {\n                userid: userid,\n                myuserid: myuserid,\n                courseid: courseid,\n                items: items,\n                myitems: myitems\n            }\n        }])[0].then(function(allitems) {\n            return allitems;\n        });\n    }\n\n    return {\n        add: function(useritemid, itemid, name, quantity, imageurl, tablenode, selecttype) {\n            AddItem(useritemid, itemid, name, quantity, imageurl, tablenode, selecttype);\n        },\n        remove: function() {\n            RemoveItem();\n        },\n        submitSwap: function(userid, myuserid, courseid, items, myitems) {\n            requestSwap(userid, myuserid, courseid, items, myitems);\n        }\n    };\n\n});"],"file":"add-item.min.js"}